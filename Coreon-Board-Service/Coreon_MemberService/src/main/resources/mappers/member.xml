<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="com.coreon.member.mapper.IMemberMapper">

    <!-- 회원 정보 매핑 -->
    <resultMap type="com.coreon.member.dto.MemberDTO" id="member">
        <id column="mobile" property="mobile"/>
        <result column="dept" property="dept"/>
        <result column="position" property="position"/>
        <result column="pw" property="pw"/>


    </resultMap>
    
    <resultMap type="com.coreon.member.dto.ResponseDTO" id="response">
        <id column="employeeNo" property="employeeNo"/>
        <result column="id" property="id"/>
        <result column="username" property="username"/>
        <result column="mobile" property="mobile"/>
        <result column="dept" property="dept"/>
        <result column="position" property="position"/>
    </resultMap>

  





    <!-- 회원 정보 수정 -->
<update id="updateProc">
  UPDATE member
  <set>
    <if test="m.mobile != null and m.mobile != ''">
      mobile = #{m.mobile},
    </if>
    <if test="m.dept != null and m.dept != ''">
      dept = #{m.dept},
    </if>
    <if test="m.position != null and m.position != ''">
      position = #{m.position},
    </if>
    <if test="m.pw != null and m.pw != ''">
      pw = #{m.pw},
    </if>
  </set>
  WHERE id = #{id}
</update>





<select id="getMyProfileById" parameterType="string" resultMap="response">
    SELECT id, username, email, mobile, dept, position
    FROM member
    WHERE id = #{id}
</select>






    

    

</mapper>
